<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <title>Monster Energy</title>
    <link rel="stylesheet" href="./productenergy.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=ABeeZee:ital,wght@0,400;1,400&display=swap"
    />
</head>
<body>
    <div class="energy-drink">Monster Energy</div>
    <div class="center-container">
        <div class="product-card" data-product-id="672bc64619505e01a8e6e3b4"> <!-- Add your unique product ID here -->
            <img class="image-icon" alt="" src="./images/energy.png" />

            <i class="tide">Monster Energy</i>
            <i class="you-can-also">You can also like this</i>
            <i class="i">Rs350</i>

            <div class="tide-ultra-oxi">
                Monster Energy is an energy drink that was created by Hansen Natural 
                Company (now Monster Beverage Corporation) in April 2002. As of 2022,
                Monster Energy had a 30.1% share of the American energy drink market,
                the second-highest after Red Bull. There were 34 different drinks under 
                the Monster brand in North America. Monster Energy is known for their sponsorship
                and support for extreme sports events. 
            </div>
            <div class="shipping-info">Shipping info</div>
            <div class="support">Support</div>
            <div class="item-details">Item details</div>
            <div class="line"></div>
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>

            <div class="product-cardsalemain" id="productCardSaleMainContainer">
                <button onclick="window.location.href='productcardshampo.html'"><img class="photo-icon" alt="" src="./images/shampoo.png" /></button>
                <i class="item">TRESemme Keratin</i>
            </div>
            <div class="product-cardnewmain">
                <button onclick="window.location.href='productcard.html'"><img class="photo-icon" alt="" src="./images/tide.png" /></button>
                <i class="item">Liquid Detergent</i>
            </div>

            <i class="item"> </i>
        </div>
        <div class="group">
            <div class="button-container">
                <button onclick="addToCart()" class="add-to-cart">ADD TO CART</button>
                <button class="ar-navigation">AR NAVIGATION</button>
            </div>
        </div>

        <script>
            async function addToCart(quantity = 1) {
                const productCard = document.querySelector('.product-card');
                const productId = productCard.getAttribute('data-product-id'); // Get the product ID from the data attribute
                const access_token = localStorage.getItem('token'); // Assuming you store the JWT token in local storage

                // Check if the access token exists
                if (!access_token) {
                    alert('You need to log in first.'); // Alert the user if no token is found
                    return; // Exit the function if no token is found
                }

                const response = await fetch('https://software-engineering-eccl.onrender.com/cart/cart', { // Sending data to backend
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${access_token}`
                    },
                    body: JSON.stringify({
                        item_id: '672bc64619505e01a8e6e3b4', // Use the product ID here
                        quantity: quantity
                    })
                });

                if (response.ok) {
                    alert('Item added to cart successfully!');
                    window.location.href = 'mybag.html'; // Redirect to "my bag" page
                } else {
                    const errorData = await response.json();
                    alert(`Error: ${errorData.msg}`);
                }
            }
        </script>
    </div>
</body>
</html>
